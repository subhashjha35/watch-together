<section class="yt-player" aria-label="YouTube video player" (pointermove)="onPointerMove()">
  <div #playerContainer class="yt-player__frame" role="group" aria-label="Video area"></div>

  <div
    class="yt-player__controls"
    role="group"
    aria-label="Player controls"
    [class.hidden]="!controlsVisible()"
    tabindex="0"
    (focus)="onControlsFocus()"
    (blur)="onControlsBlur()"
  >
    <button
      type="button"
      class="yt-player__btn"
      [disabled]="!player.isReady()"
      [attr.aria-pressed]="player.isPlaying() ? 'true' : 'false'"
      [attr.aria-label]="player.isPlaying() ? 'Pause' : 'Play'"
      (click)="player.isPlaying() ? player.pause() : player.play()"
    >
      @if (player.isPlaying()) {
        <shared-icon name="pause" />
        <span class="visually-hidden">Pause</span>
      } @else {
        <shared-icon name="play" />
        <span class="visually-hidden">Play</span>
      }
    </button>

    <label class="yt-player__time" [attr.for]="'yt-progress'">
      <span aria-label="Current time">{{ player.currentTime() | number:'1.0-0' }}s</span>
      /
      <span aria-label="Duration">{{ player.duration() | number:'1.0-0' }}s</span>
    </label>

    <input
      id="yt-progress"
      class="yt-player__progress"
      type="range"
      [min]="0"
      [max]="player.duration()"
      [step]="0.1"
      [value]="player.currentTime()"
      [disabled]="!player.isReady()"
      (input)="onSeekChange($event)"
      aria-label="Seek"
    />

    <div class="yt-player__volume" role="group" aria-label="Volume controls">
      <button
        type="button"
        class="yt-player__btn"
        [disabled]="!player.isReady()"
        [attr.aria-pressed]="player.isMuted() ? 'true' : 'false'"
        [attr.aria-label]="player.isMuted() ? 'Unmute' : 'Mute'"
        (click)="player.toggleMute()"
      >
        @if (player.isMuted() || player.volume() === 0) {
          <shared-icon name="volume-muted" />
          <span class="visually-hidden">Unmute</span>
        } @else if (player.volume() < 50) {
          <shared-icon name="volume-low" />
          <span class="visually-hidden">Mute</span>
        } @else {
          <shared-icon name="volume-high" />
          <span class="visually-hidden">Mute</span>
        }
      </button>

      <input
        class="yt-player__volume-slider"
        type="range"
        [min]="0"
        [max]="100"
        [step]="1"
        [value]="player.isMuted() ? 0 : player.volume()"
        [disabled]="!player.isReady()"
        (input)="onVolumeChange($event)"
        aria-label="Volume"
      />
    </div>

    <button
      type="button"
      class="yt-player__btn"
      aria-label="Toggle fullscreen"
      (click)="toggleFullscreen()"
    >
      @if (isFullscreen()) {
        <shared-icon name="fullscreen-exit" />
        <span class="visually-hidden">Exit Fullscreen</span>
      } @else {
        <shared-icon name="fullscreen-enter" />
        <span class="visually-hidden">Fullscreen</span>
      }
    </button>
  </div>
</section>
