.movie-room {
  .composite-player {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;

    lib-youtube-video-player {
      flex: 1 1 50%;
      min-width: 0;
    }
  }

  .chat-container {
    flex: 1 1 0;
    min-width: 240px;
    height: 100dvh;
    background: #b4d2f3;
    flex-wrap: wrap;
    position: relative;

    .chat-video {
      z-index: 9999;
      position: relative;
      background: #1f4165;
      border-radius: 0.375rem;
      overflow: hidden;
      /* Base sizing — overridden by the directive when user resizes */
      min-width: 320px;
      height: auto;

      &.my-video {
        padding: 0;
      }

      /* Make video / component children fill the container */
      video {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: contain;
      }

      lib-video {
        display: block;
        width: 100%;
        height: 100%;
      }

      /* Visual resize-handle hint in the bottom-right corner */
      &::after {
        content: '';
        position: absolute;
        right: 2px;
        bottom: 2px;
        width: 12px;
        height: 12px;
        border-right: 2px solid rgba(255, 255, 255, 0.5);
        border-bottom: 2px solid rgba(255, 255, 255, 0.5);
        pointer-events: none;
      }
    }
  }
}

/* ── Fullscreen layout ─────────────────────────────────────────────────
   .is-fullscreen is toggled by the YouTube player component on the
   fullscreen target element.  Using a class instead of :fullscreen
   avoids Angular emulated view encapsulation issues.
   ──────────────────────────────────────────────────────────────────── */
.is-fullscreen.composite-player {
  position: relative;
  background: #000;
  display: flex;
  flex-direction: column;

  /* Let the YouTube player fill all available space */
  lib-youtube-video-player {
    flex: 1 1 0;
    min-height: 0;
  }

  /* Overlay the chat-container as a PiP panel in the bottom-right */
  .chat-container {
    position: absolute;
    right: 1rem;
    bottom: 4rem; /* above the player controls bar */
    z-index: 10;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 0;
    border-radius: 0;
    background: transparent;
    width: 200px;

    .chat-video {
      width: 100%;
      height: auto;
      border-radius: 0.5rem;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.6);
      background: #1f4165;


      video,
      lib-video {
        width: 100%;
        height: auto;
        display: block;
      }
    }
  }
}

.text-chat-container {
  position: fixed;
  right: 10px;
  bottom: 10px;
  min-width: 320px;
}

@media screen and (width < '768px') {
  .text-chat-container {
    right: 0;
    bottom: 0;
    width: 100vw;
    max-height: 100vh;
    overflow: auto;
  }
}
